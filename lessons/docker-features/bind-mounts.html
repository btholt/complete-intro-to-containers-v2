<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/images/favicon.ico"/><title>Bind Mounts – Complete Intro to Containers</title><meta name="description" content="Learn about using volumes and bind mounts in Docker containers to handle stateful operations, along with the differences between them. Bind mounts enable flexible file access between the host computer and container, offering a practical solution for testing or development scenarios."/><meta name="keywords" content="Docker,volumes,bind mounts,stateful containers,containerization,NGINX,Dockerfile"/><meta name="og:description" content="Learn about using volumes and bind mounts in Docker containers to handle stateful operations, along with the differences between them. Bind mounts enable flexible file access between the host computer and container, offering a practical solution for testing or development scenarios."/><meta name="og:title" content="Bind Mounts – Complete Intro to Containers"/><meta name="og:image" content="/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="14"/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/cfac17cb37b27821.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/cfac17cb37b27821.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-4e7214a60fad8e88.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-5429a50ba5373c56.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-d2ba44903cd47711.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-564cf6bb10408614.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-ba225542c35827e2.js" defer="" crossorigin=""></script><script src="/_next/static/nARcRKX1ZlcrYUdSUSS9z/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/nARcRKX1ZlcrYUdSUSS9z/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to Containers</a></h1><div class="navbar-info"><a href="https://holt.fyi/containers" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>So far we&#39;ve been dealing with self-contained containers. Normally this is all you ever want: containers that can spin up and spin down as frequently as they need to. They&#39;re ephemeral, temporary, and disposable. None of these containers are &quot;snowflakes&quot;. When I say snowflakes, picture you&#39;re running a server that&#39;s serving a Wordpress site. Imagine setting up this server, SSH&#39;ing into the server, and setting everything up to be just right and tuned to the exact way you need it. This would be a snowflake server: if someone goes and deletes this server, you&#39;re screwed. You have to go and spend a bunch of time re-setting up this server. This is exactly the sort of thing we&#39;re trying to avoid with containers. These are the &quot;pet&quot; containers we talked about earlier. We want to make our servers easy to reproduce whenever we want so we can spin up and spin down servers at will. These are the &quot;cattle&quot; containers we talked about.</p>
<p>However not everything can fit neatly into a container all the time. Sometimes our containers need to be stateful in some capacity. Sometimes our containers need to read and write to the host. This is fundamentally at odds with the idea of a stateless, able-to-create-and-destroy-anytime container that we&#39;ve been adhering to thusfar. So what are we to do?</p>
<p>Enter volumes and bind mounts. Both of these are methods of reading and writing to the host but with slight-but-important differences of when to use which. We&#39;ll go over both.</p>
<h2>Bind Mounts</h2>
<p>Let&#39;s start here because this is easier to see the use case for. Bind mounts allow you to mount files from your host computer into your container. This allows you to use the containers a much more flexible way than previously possible: you don&#39;t have to know what files the container will have <em>when you build it</em> and it allows you to determine those files <em>when you run it</em>.</p>
<p>Let&#39;s go over an example of how this could be useful.</p>
<p>In the previous project, we used the NGINX image to build a container with our static assets baked into the container. In general this what I recommend you do since now we can ship that container anywhere and it&#39;ll just work. It&#39;s totally self-contained. But what if we just want to run a NGINX container locally to test stuff out? Sure, we could make a new Dockerfile and write it, but wouldn&#39;t it be cool if we could just use the NGINX container directly? We can! Let&#39;s try it. Go back to your static site project from the previous lesson. Let&#39;s use the <code>nginx</code> container to serve directly from it.</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># from the root directory of your Astro app</span>
docker run --mount <span class="hljs-built_in">type</span>=<span class="hljs-built_in">bind</span>,<span class="hljs-built_in">source</span>=<span class="hljs-string">&quot;<span class="hljs-subst">$(pwd)</span>&quot;</span>/dist,target=/usr/share/nginx/html -p 8080:80 nginx:latest
</code></pre><p><a href="https://github.com/btholt/project-files-for-complete-intro-to-containers-v2/blob/main/static-asset-project">⛓️ Link to the Project</a> (run the docker command from this directory)</p>
<blockquote>
<p>Make sure you have built the project. If you did the previous lesson you should have this already built. If you don&#39;t see the <code>dist/</code> directory, run <code>npm install &amp;&amp; npm run build</code>. You should see the <code>dist</code> directory after that.</p>
</blockquote>
<p>This is how you do bind mounts. It&#39;s a bit verbose but necessary. Let&#39;s dissect it.</p>
<ul>
<li>We use the <code>--mount</code> flag to identify we&#39;re going to be mounting something in from the host.</li>
<li>As far as I know the only two types are <code>bind</code> and <code>volume</code>. Here we&#39;re using bind because we to mount in some piece of already existing data from the host.</li>
<li>In the source, we identify what part of the host we want to make readable-and-writable to the container. It has to be an absolute path (e.g we can&#39;t say <code>&quot;./dist&quot;</code>) which is why use the <code>&quot;$(pwd)&quot;</code> to get the <strong>p</strong>resent <strong>w</strong>orking <strong>d</strong>irectory to make it an absolute path.</li>
<li>The target is where we want those files to be mounted in the container. Here we&#39;re putting it in the spot that NGINX is expecting.</li>
<li>As a side note, you can mount as many mounts as you care to, and you mix bind and volume mounts. NGINX has a default config that we&#39;re using but if we used another bind mount to mount an NGINX config to <code>/etc/nginx/nginx.conf</code> it would use that instead.</li>
</ul>
<p>Again, it&#39;s preferable to bake your own container so you don&#39;t have to ship the container and the code separately; you&#39;d rather just ship one thing that you can run without much ritual nor ceremony. But this is a useful trick to have in your pocket. It&#39;s kind of like <a href="https://github.com/vercel/serve">serve</a> but with real NGINX.</p>
</div><div class="lesson-links"><a href="/lessons/making-tiny-containers/static-asset-project" class="prev">← Previous</a><a href="/lessons/docker-features/volumes" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="40" height="32" viewBox="0 0 40 32"><defs><clipPath id="clip-twitter-social"><rect width="40" height="32"></rect></clipPath></defs><g id="twitter-social" clip-path="url(#clip-twitter-social)"><g id="Group_269" data-name="Group 269" transform="translate(-230.23 -1140.849)"><path id="Path_419" data-name="Path 419" d="M266.12,1148.861v1.035a23.092,23.092,0,0,1-1.507,8.1,24.08,24.08,0,0,1-4.475,7.381,22.175,22.175,0,0,1-7.306,5.4,24.129,24.129,0,0,1-10,2.07,23.7,23.7,0,0,1-6.667-.945,22.83,22.83,0,0,1-5.936-2.655q.959.091,1.963.09a16.518,16.518,0,0,0,5.434-.9,17.111,17.111,0,0,0,4.749-2.52,8.275,8.275,0,0,1-4.749-1.643,7.8,7.8,0,0,1-2.877-3.983,8.268,8.268,0,0,0,1.507.135,8.58,8.58,0,0,0,2.146-.27,8.16,8.16,0,0,1-5.685-4.344,8.326,8.326,0,0,1-.89-3.578v-.135a7.775,7.775,0,0,0,3.744,1.035,8.183,8.183,0,0,1-2.671-2.9,7.817,7.817,0,0,1-.982-3.848,7.948,7.948,0,0,1,1.1-4.05,23.53,23.53,0,0,0,16.895,8.46,9.221,9.221,0,0,1-.183-1.845,7.787,7.787,0,0,1,1.1-4.05,8.216,8.216,0,0,1,2.991-2.948,7.991,7.991,0,0,1,4.087-1.1,8.184,8.184,0,0,1,5.982,2.566,16.087,16.087,0,0,0,5.205-1.98,7.784,7.784,0,0,1-1.393,2.588,8.4,8.4,0,0,1-2.215,1.913,16.856,16.856,0,0,0,4.749-1.305A17.032,17.032,0,0,1,266.12,1148.861Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Excercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"post":{"attributes":{"description":"Learn about using volumes and bind mounts in Docker containers to handle stateful operations, along with the differences between them. Bind mounts enable flexible file access between the host computer and container, offering a practical solution for testing or development scenarios.","keywords":["Docker","volumes","bind mounts","stateful containers","containerization","NGINX","Dockerfile"]},"html":"\u003cp\u003eSo far we\u0026#39;ve been dealing with self-contained containers. Normally this is all you ever want: containers that can spin up and spin down as frequently as they need to. They\u0026#39;re ephemeral, temporary, and disposable. None of these containers are \u0026quot;snowflakes\u0026quot;. When I say snowflakes, picture you\u0026#39;re running a server that\u0026#39;s serving a Wordpress site. Imagine setting up this server, SSH\u0026#39;ing into the server, and setting everything up to be just right and tuned to the exact way you need it. This would be a snowflake server: if someone goes and deletes this server, you\u0026#39;re screwed. You have to go and spend a bunch of time re-setting up this server. This is exactly the sort of thing we\u0026#39;re trying to avoid with containers. These are the \u0026quot;pet\u0026quot; containers we talked about earlier. We want to make our servers easy to reproduce whenever we want so we can spin up and spin down servers at will. These are the \u0026quot;cattle\u0026quot; containers we talked about.\u003c/p\u003e\n\u003cp\u003eHowever not everything can fit neatly into a container all the time. Sometimes our containers need to be stateful in some capacity. Sometimes our containers need to read and write to the host. This is fundamentally at odds with the idea of a stateless, able-to-create-and-destroy-anytime container that we\u0026#39;ve been adhering to thusfar. So what are we to do?\u003c/p\u003e\n\u003cp\u003eEnter volumes and bind mounts. Both of these are methods of reading and writing to the host but with slight-but-important differences of when to use which. We\u0026#39;ll go over both.\u003c/p\u003e\n\u003ch2\u003eBind Mounts\u003c/h2\u003e\n\u003cp\u003eLet\u0026#39;s start here because this is easier to see the use case for. Bind mounts allow you to mount files from your host computer into your container. This allows you to use the containers a much more flexible way than previously possible: you don\u0026#39;t have to know what files the container will have \u003cem\u003ewhen you build it\u003c/em\u003e and it allows you to determine those files \u003cem\u003ewhen you run it\u003c/em\u003e.\u003c/p\u003e\n\u003cp\u003eLet\u0026#39;s go over an example of how this could be useful.\u003c/p\u003e\n\u003cp\u003eIn the previous project, we used the NGINX image to build a container with our static assets baked into the container. In general this what I recommend you do since now we can ship that container anywhere and it\u0026#39;ll just work. It\u0026#39;s totally self-contained. But what if we just want to run a NGINX container locally to test stuff out? Sure, we could make a new Dockerfile and write it, but wouldn\u0026#39;t it be cool if we could just use the NGINX container directly? We can! Let\u0026#39;s try it. Go back to your static site project from the previous lesson. Let\u0026#39;s use the \u003ccode\u003enginx\u003c/code\u003e container to serve directly from it.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-comment\"\u003e# from the root directory of your Astro app\u003c/span\u003e\ndocker run --mount \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-built_in\"\u003ebind\u003c/span\u003e,\u003cspan class=\"hljs-built_in\"\u003esource\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-subst\"\u003e$(pwd)\u003c/span\u003e\u0026quot;\u003c/span\u003e/dist,target=/usr/share/nginx/html -p 8080:80 nginx:latest\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ca href=\"https://github.com/btholt/project-files-for-complete-intro-to-containers-v2/blob/main/static-asset-project\"\u003e⛓️ Link to the Project\u003c/a\u003e (run the docker command from this directory)\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eMake sure you have built the project. If you did the previous lesson you should have this already built. If you don\u0026#39;t see the \u003ccode\u003edist/\u003c/code\u003e directory, run \u003ccode\u003enpm install \u0026amp;\u0026amp; npm run build\u003c/code\u003e. You should see the \u003ccode\u003edist\u003c/code\u003e directory after that.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThis is how you do bind mounts. It\u0026#39;s a bit verbose but necessary. Let\u0026#39;s dissect it.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWe use the \u003ccode\u003e--mount\u003c/code\u003e flag to identify we\u0026#39;re going to be mounting something in from the host.\u003c/li\u003e\n\u003cli\u003eAs far as I know the only two types are \u003ccode\u003ebind\u003c/code\u003e and \u003ccode\u003evolume\u003c/code\u003e. Here we\u0026#39;re using bind because we to mount in some piece of already existing data from the host.\u003c/li\u003e\n\u003cli\u003eIn the source, we identify what part of the host we want to make readable-and-writable to the container. It has to be an absolute path (e.g we can\u0026#39;t say \u003ccode\u003e\u0026quot;./dist\u0026quot;\u003c/code\u003e) which is why use the \u003ccode\u003e\u0026quot;$(pwd)\u0026quot;\u003c/code\u003e to get the \u003cstrong\u003ep\u003c/strong\u003eresent \u003cstrong\u003ew\u003c/strong\u003eorking \u003cstrong\u003ed\u003c/strong\u003eirectory to make it an absolute path.\u003c/li\u003e\n\u003cli\u003eThe target is where we want those files to be mounted in the container. Here we\u0026#39;re putting it in the spot that NGINX is expecting.\u003c/li\u003e\n\u003cli\u003eAs a side note, you can mount as many mounts as you care to, and you mix bind and volume mounts. NGINX has a default config that we\u0026#39;re using but if we used another bind mount to mount an NGINX config to \u003ccode\u003e/etc/nginx/nginx.conf\u003c/code\u003e it would use that instead.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAgain, it\u0026#39;s preferable to bake your own container so you don\u0026#39;t have to ship the container and the code separately; you\u0026#39;d rather just ship one thing that you can run without much ritual nor ceremony. But this is a useful trick to have in your pocket. It\u0026#39;s kind of like \u003ca href=\"https://github.com/vercel/serve\"\u003eserve\u003c/a\u003e but with real NGINX.\u003c/p\u003e\n","markdown":"\nSo far we've been dealing with self-contained containers. Normally this is all you ever want: containers that can spin up and spin down as frequently as they need to. They're ephemeral, temporary, and disposable. None of these containers are \"snowflakes\". When I say snowflakes, picture you're running a server that's serving a Wordpress site. Imagine setting up this server, SSH'ing into the server, and setting everything up to be just right and tuned to the exact way you need it. This would be a snowflake server: if someone goes and deletes this server, you're screwed. You have to go and spend a bunch of time re-setting up this server. This is exactly the sort of thing we're trying to avoid with containers. These are the \"pet\" containers we talked about earlier. We want to make our servers easy to reproduce whenever we want so we can spin up and spin down servers at will. These are the \"cattle\" containers we talked about.\n\nHowever not everything can fit neatly into a container all the time. Sometimes our containers need to be stateful in some capacity. Sometimes our containers need to read and write to the host. This is fundamentally at odds with the idea of a stateless, able-to-create-and-destroy-anytime container that we've been adhering to thusfar. So what are we to do?\n\nEnter volumes and bind mounts. Both of these are methods of reading and writing to the host but with slight-but-important differences of when to use which. We'll go over both.\n\n## Bind Mounts\n\nLet's start here because this is easier to see the use case for. Bind mounts allow you to mount files from your host computer into your container. This allows you to use the containers a much more flexible way than previously possible: you don't have to know what files the container will have _when you build it_ and it allows you to determine those files _when you run it_.\n\nLet's go over an example of how this could be useful.\n\nIn the previous project, we used the NGINX image to build a container with our static assets baked into the container. In general this what I recommend you do since now we can ship that container anywhere and it'll just work. It's totally self-contained. But what if we just want to run a NGINX container locally to test stuff out? Sure, we could make a new Dockerfile and write it, but wouldn't it be cool if we could just use the NGINX container directly? We can! Let's try it. Go back to your static site project from the previous lesson. Let's use the `nginx` container to serve directly from it.\n\n```bash\n# from the root directory of your Astro app\ndocker run --mount type=bind,source=\"$(pwd)\"/dist,target=/usr/share/nginx/html -p 8080:80 nginx:latest\n```\n\n[⛓️ Link to the Project][project] (run the docker command from this directory)\n\n\u003e Make sure you have built the project. If you did the previous lesson you should have this already built. If you don't see the `dist/` directory, run `npm install \u0026\u0026 npm run build`. You should see the `dist` directory after that.\n\nThis is how you do bind mounts. It's a bit verbose but necessary. Let's dissect it.\n\n- We use the `--mount` flag to identify we're going to be mounting something in from the host.\n- As far as I know the only two types are `bind` and `volume`. Here we're using bind because we to mount in some piece of already existing data from the host.\n- In the source, we identify what part of the host we want to make readable-and-writable to the container. It has to be an absolute path (e.g we can't say `\"./dist\"`) which is why use the `\"$(pwd)\"` to get the **p**resent **w**orking **d**irectory to make it an absolute path.\n- The target is where we want those files to be mounted in the container. Here we're putting it in the spot that NGINX is expecting.\n- As a side note, you can mount as many mounts as you care to, and you mix bind and volume mounts. NGINX has a default config that we're using but if we used another bind mount to mount an NGINX config to `/etc/nginx/nginx.conf` it would use that instead.\n\nAgain, it's preferable to bake your own container so you don't have to ship the container and the code separately; you'd rather just ship one thing that you can run without much ritual nor ceremony. But this is a useful trick to have in your pocket. It's kind of like [serve][serve] but with real NGINX.\n\n[storage]: https://docs.docker.com/storage/\n[project]: https://github.com/btholt/project-files-for-complete-intro-to-containers-v2/blob/main/static-asset-project\n[serve]: https://github.com/vercel/serve\n","slug":"bind-mounts","title":"Bind Mounts","section":"Docker Features","icon":"box","filePath":"/home/runner/work/complete-intro-to-containers-v2/complete-intro-to-containers-v2/lessons/06-docker-features/A-bind-mounts.md","nextSlug":"/lessons/docker-features/volumes","prevSlug":"/lessons/making-tiny-containers/static-asset-project"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"docker-features","slug":"bind-mounts"},"buildId":"nARcRKX1ZlcrYUdSUSS9z","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>